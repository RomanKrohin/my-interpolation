---

**Студент:** Крохин Роман Олегович  
**ИСУ:** 368381  
**Группа:** P3324  
**Университет:** НИУ ИТМО  
**Факультет:** Программная инженерия и компьютерная техника  
**Курс:** 3-й курс  

---

# Лабораторная работа: Интерполяция

## Цель работы

Цель данной лабораторной работы — изучение навыков работы с вводом/выводом, потоковой обработкой данных и командной строкой. Мы реализуем интерполяцию, включая линейную и Лагранжевую интерполяцию, в соответствии с заданными требованиями.

## Описание программы

Программа позволяет выполнять интерполяцию входных данных, подавая их на стандартный ввод в текстовом формате. Входные данные должны быть отсортированы по возрастанию по оси X. Программа работает в потоковом режиме, обеспечивая непрерывную обработку данных.

[Реализация](interpolation/src/interpolation/core.clj)

### Алгоритмы интерполяции

1. **Линейная интерполяция** — используется для расчета значений между двумя заданными точками, создавая отрезки.
2. **Лагранжева интерполяция** — используется для более точного вычисления значений на основе всех введенных точек.

### Аргументы командной строки

Программа поддерживает следующие аргументы командной строки:

- `-s` или `--step` — задает шаг интерполяции (по умолчанию 1.0).
- `-a` или `--algorithm` — задает алгоритм интерполяции (доступные значения: `linear`, `lagrange`, `both`).
- `-h` или `--help` — выводит справку по использованию программы.

### Архитектура программы

Программа организована следующим образом:

```
+---------------------------+
| обработка входного потока |
+---------------------------+
        |
        | поток / список / последовательность точек
        v
+-----------------------+      +------------------------------+
| алгоритм интерполяции |<-----| генератор точек, для которых |
+-----------------------+      | необходимо вычислить         |
        |                      | промежуточные значения       |
        |                      +------------------------------+
        |
        | поток / список / последовательность рассчитанных точек
        v
+------------------------+
| печать выходных данных |
+------------------------+

```

- **Обработка входного потока**: Программа ожидает ввод данных через стандартный ввод и использует цикл для обработки каждой новой точки.
  
- **Генератор точек**: Входные данные накапливаются в атоме `window`, и как только накоплено достаточное количество точек, происходит вызов интерполяционных алгоритмов.

- **Алгоритм интерполяции**: Реализованы функции для линейной и Лагранжевой интерполяции, которые вызываются по мере накопления достаточного количества точек.

- **Печать выходных данных**: Результаты интерполяции выводятся на стандартный вывод в формате, удобном для чтения.

Таким образом, программа организована для эффективной обработки потоковых данных и вычисления промежуточных значений в реальном времени.

### Потоковый режим интерполяции

Программа реализует потоковую обработку данных с использованием окон, что позволяет динамически адаптироваться к изменениям во входных данных. Каждое окно данных, используемое для расчета интерполяции, содержит ограниченное количество точек, что обеспечивает точность расчетов. 

- При вводе новых точек старые данные постепенно удаляются из окна, а новые добавляются, как показано ниже:

```
o o o o o o . . x x x
  x x x . . o . . x x x
    x x x . . o . . x x x
      x x x . . o . . x x x
        x x x . . o . . x x x
          x x x . . o . . x x x
            x x x . . o o o o o o EOF
```


- **`o`** — рассчитанные значения интерполяции, для которых используется текущее окно данных. Большинство окон рассчитаны на одну точку, так как именно в центре результат наиболее точен.
- **`.`** — точки, задействованные в расчете значений `o`.
- **`x`** — точки, которые не используются для расчетов текущего окна.

Таким образом, программа эффективно работает в потоковом режиме, производя интерполяцию по мере поступления новых данных.

###Пример

#Команда
```
cat data.csv | lein run --step 1.0 --algorithm both
```

#Вывод
```
Введите точки в формате: X Y
Линейная интерполяция (X от 0.000 до 2.000):
0.00    1.00    2.00
0.00    0.64    1.27

Линейная интерполяция (X от 1.571 до 3.571):
1.57    2.57    3.57
1.00    0.36    -0.27

Линейная интерполяция (X от 3.142 до 5.142):
3.14    4.14    5.14
0.00    -0.64   -1.27

Линейная интерполяция (X от 4.712 до 6.712):
4.71    5.71    6.71
-1.00   -0.36   0.27

Лагранжевская интерполяция (X от 0.000 до 6.283):
0.00    1.00    2.00    3.00    4.00    5.00    6.00    7.00
0.00    0.97    0.84    0.12    -0.67   -1.03   -0.42   1.67

Линейная интерполяция (X от 6.283 до 8.283):
6.28    7.28    8.28
0.00    0.64    1.27

Лагранжевская интерполяция (X от 1.571 до 7.854):
1.57    2.57    3.57    4.57    5.57    6.57    7.57    8.57
1.00    0.59    -0.43   -0.99   -0.67   0.31    1.04    -0.03

Линейная интерполяция (X от 7.854 до 9.854):
7.85    8.85    9.85
1.00    0.36    -0.27

Лагранжевская интерполяция (X от 3.142 до 9.425):
3.14    4.14    5.14    6.14    7.14    8.14    9.14    10.14
0.00    -0.97   -0.84   -0.12   0.67    1.03    0.42    -1.66

Линейная интерполяция (X от 9.425 до 11.425):
9.43    10.43   11.43
0.00    -0.64   -1.27

Лагранжевская интерполяция (X от 4.712 до 10.996):
4.71    5.71    6.71    7.71    8.71    9.71    10.71   11.71
-1.00   -0.59   0.43    0.99    0.67    -0.31   -1.04   0.03

Линейная интерполяция (X от 10.996 до 12.996):
11.00   12.00   13.00
-1.00   -0.36   0.27

Лагранжевская интерполяция (X от 6.283 до 12.568):
6.28    7.28    8.28    9.28    10.28   11.28   12.28   13.28
0.00    0.97    0.84    0.12    -0.67   -1.03   -0.42   1.66

Линейная интерполяция (X от 12.568 до 14.568):
12.57   13.57   14.57
0.00    0.64    1.27

Лагранжевская интерполяция (X от 7.854 до 14.139):
7.85    8.85    9.85    10.85   11.85   12.85   13.85   14.85
1.00    0.59    -0.43   -0.99   -0.67   0.30    1.04    -0.02
```

#Данные
```
0.000;0.00
1.571;1.00
3.142;0.00
4.712;-1.00
6.283;0.00
7.854;1.00
9.425;0.00
10.996;-1.00
12.568;0.00
14.139;1.00
```

## Тестирование

### Unit Testing

Для тестирования были реализованы следующие [тесты](interpolation/test/interpolation/core_test.clj)

### Вывод

В ходе выполнения лабораторной работы была успешно реализована программа для интерполяции, которая отвечает всем заданным требованиям. Основные достижения включают:

1. **Потоковая обработка данных**: Программа принимает входные данные через стандартный ввод, что позволяет обрабатывать данные в реальном времени и обеспечивать непрерывный поток вычислений.

2. **Алгоритмы интерполяции**: Реализованы как линейная интерполяция, так и Лагранжева интерполяция. Оба алгоритма работают корректно и могут быть вызваны одновременно в зависимости от переданных аргументов командной строки.

3. **Динамическое окно данных**: Программа поддерживает динамическое обновление окна данных, что позволяет точно рассчитывать промежуточные значения на основе самых свежих входных данных. Алгоритмы адаптируются к количеству введенных точек, что делает их гибкими и удобными для использования.

4. **Вывод результатов**: Рассчитанные значения выводятся в удобочитаемом формате, что упрощает анализ результатов интерполяции.

В целом, данная реализация демонстрирует хорошие навыки работы с потоковой обработкой данных, использованием алгоритмов интерполяции и взаимодействием с командной строкой. Программа может быть использована в дальнейших приложениях, связанных с вычислительной математикой и анализом данных.




